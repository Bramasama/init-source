---
import Base from "../layouts/Base.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { BRAND } from "../seo/site.config";
---

<Base
  title="Get represented - Platform / SRE / DevOps (UK) | Init Source"
  description="Get represented for UK permanent Platform, SRE, and DevOps roles. Share your profile and preferences."
  image={`${BRAND.domain}/og-image.jpg`}
  canonical={`${BRAND.domain}/candidates`}
>
  <Fragment slot="head">
    <meta charset="UTF-8" />
  </Fragment>

  <Header />

  <section class="section bg-neutral-light transition-colors dark:bg-slate-900">
    <div class="container maxw text-center">
      <h1 class="h1 font-extrabold text-text dark:text-slate-100">Get represented</h1>
      <p class="mt-4 text-lg text-slate-600 dark:text-slate-300">
        We represent UK permanent Platform, SRE, and DevOps candidates. No sending without permission and no ghosting.
      </p>
    </div>
  </section>

  <section class="section bg-white transition-colors dark:bg-slate-950">
    <div class="container max-w-3xl mx-auto">
      <h2 class="text-3xl font-bold text-slate-900 dark:text-slate-100">Your details</h2>
      <p class="mt-2 text-slate-500 dark:text-slate-300">
        This form is for representation requests only. We do not use automated decision making.
      </p>
      <form id="candidateForm" class="mt-8 grid gap-5" data-form="candidate">
        <input type="hidden" name="_subject" value="Candidate representation request" />
        <input type="hidden" name="_redirect" value="https://initsource.co.uk/thanks" />
        <input type="hidden" name="_type" value="candidate" />
        <input type="hidden" name="_source" value="candidates-page" />
        <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Full name</span>
          <input required name="name" placeholder="Your name"
                 class="mt-2 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400"
                 autocomplete="name" />
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Email</span>
          <input required type="email" name="email" placeholder="Your email"
                 class="mt-2 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400"
                 autocomplete="email" inputmode="email" />
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">LinkedIn URL</span>
          <input required type="url" name="linkedin_url" placeholder="https://linkedin.com/in/your-handle"
                 class="mt-2 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400"
                 inputmode="url" />
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Target role</span>
          <select required name="role_target"
                  class="mt-2 w-full rounded-lg border border-gray-300 bg-white px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100">
            <option value="">Select a role</option>
            <option>Platform Engineer</option>
            <option>Site Reliability Engineer (SRE)</option>
            <option>DevOps Engineer</option>
            <option>Cloud Infrastructure Engineer</option>
            <option>Other (Platform/SRE/DevOps)</option>
          </select>
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Salary expectation (GBP)</span>
          <input required name="salary_expectation" placeholder="e.g. GBP 75k-95k"
                 class="mt-2 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400" />
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Notice period / availability</span>
          <input required name="notice_period" placeholder="e.g. 1 month / immediate"
                 class="mt-2 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400" />
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Location / remote preference</span>
          <input required name="location_preference" placeholder="e.g. London, hybrid (2 days on-site)"
                 class="mt-2 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400" />
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Resume link (optional)</span>
          <input name="resume_link" placeholder="Link to CV or portfolio"
                 class="mt-2 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400" />
        </label>

        <label class="block">
          <span class="text-sm font-semibold text-slate-700 dark:text-slate-200">Notes (optional)</span>
          <textarea name="message" placeholder="Anything else we should know?"
                    class="mt-2 h-32 w-full rounded-lg border border-gray-300 px-5 py-4 text-lg transition-colors dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 dark:placeholder-slate-400"></textarea>
        </label>

        <button type="submit"
                class="rounded-full bg-primary px-7 py-4 text-lg font-semibold text-white transition-colors hover:bg-accent hover:text-slate-900 dark:hover:text-slate-900">
          Submit
        </button>
        <p id="candidateStatus" class="text-sm text-slate-500 dark:text-slate-400" aria-live="polite"></p>
      </form>
      <p class="mt-6 text-sm text-slate-500 dark:text-slate-400">
        By submitting, you agree to our
        <a href="/privacy" class="text-primary hover:underline dark:text-accent" target="_blank" rel="noopener">Privacy Policy</a>.
        We do not use automated decision making.
      </p>
    </div>
  </section>

  <Footer />

  <script>
    const form = document.getElementById('candidateForm');
    const status = document.getElementById('candidateStatus');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      status.textContent = 'Submitting...';
      const data = Object.fromEntries(new FormData(form).entries());
      const res = await fetch('/api/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const out = await res.json().catch(() => ({}));
      if (res.ok && out.ok) {
        status.textContent = 'Thanks - we will be in touch if there is a fit.';
        form.reset();
      } else {
        status.textContent = 'Submission failed: ' + (out.error || res.status);
      }
    });
  </script>
</Base>
